<div
    class="flex min-w-0 flex-auto flex-col bg-gray-200 sm:absolute sm:inset-0 sm:overflow-hidden dark:bg-transparent"
>
    <!-- Header -->
    <div
        class="bg-card relative flex flex-0 flex-col border-b px-6 py-8 sm:flex-row sm:items-center sm:justify-between md:px-8"
    >
        <!-- Title -->
        <div class="text-4xl font-extrabold tracking-tight">
            Gestion des Virements
        </div>

        <!-- Actions -->
        <div class="mt-6 flex shrink-0 items-center gap-3 sm:ml-4 sm:mt-0">
            <!-- Clear filters button -->
            <button
                mat-stroked-button
                type="button"
                [disabled]="isDisabled()"
                (click)="clearFilters()"
            >
                <mat-icon [svgIcon]="'heroicons_outline:funnel'" />
                <span class="ml-2">Effacer les filtres</span>
            </button>

            <mat-form-field
                class="fuse-mat-dense fuse-mat-rounded min-w-48 md:hidden"
                [subscriptSizing]="'dynamic'"
            >
                <mat-icon
                    class="icon-size-5"
                    matPrefix
                    [svgIcon]="'heroicons_solid:magnifying-glass'"
                />
                <input
                    matInput
                    class="truncate"
                    title="rechercher"
                    [formControl]="searchInputControl"
                    [autocomplete]="'off'"
                    [placeholder]="'Rechercher...'"
                />
            </mat-form-field>
        </div>
    </div>

    <!-- Filters -->
    <div class="bg-card border-b px-6 py-4 md:px-8">
        <div
            class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
        >
            <!-- Status Filter -->
            <mat-form-field
                class="fuse-mat-dense"
                [subscriptSizing]="'dynamic'"
            >
                <mat-label>Statut</mat-label>
                <mat-select [formControl]="statusFilterControl">
                    <mat-option value="">Tous les statuts</mat-option>
                    @for (option of transferStatusOptions(); track option.key) {
                        <mat-option [value]="option.key">
                            {{ option.displayName }}
                        </mat-option>
                    }
                </mat-select>
            </mat-form-field>

            <!-- Beneficiary Filter -->
            <mat-form-field
                class="fuse-mat-dense"
                [subscriptSizing]="'dynamic'"
            >
                <mat-label>Bénéficiaire</mat-label>
                <mat-icon
                    class="icon-size-5"
                    matPrefix
                    [svgIcon]="'heroicons_solid:user'"
                />
                <input
                    matInput
                    [formControl]="beneficiaryFilterControl"
                    [autocomplete]="'off'"
                    [placeholder]="'Nom du bénéficiaire...'"
                />
            </mat-form-field>

            <!-- Min Amount Filter -->
            <mat-form-field
                class="fuse-mat-dense"
                [subscriptSizing]="'dynamic'"
            >
                <mat-label>Montant minimum</mat-label>
                <mat-icon
                    class="icon-size-5"
                    matPrefix
                    [svgIcon]="'heroicons_solid:currency-dollar'"
                />
                <input
                    matInput
                    type="number"
                    [formControl]="minAmountFilterControl"
                    [placeholder]="'0.00'"
                />
            </mat-form-field>

            <!-- Max Amount Filter -->
            <mat-form-field
                class="fuse-mat-dense"
                [subscriptSizing]="'dynamic'"
            >
                <mat-label>Montant maximum</mat-label>
                <mat-icon
                    class="icon-size-5"
                    matPrefix
                    [svgIcon]="'heroicons_solid:currency-dollar'"
                />
                <input
                    matInput
                    type="number"
                    [formControl]="maxAmountFilterControl"
                    [placeholder]="'0.00'"
                />
            </mat-form-field>

            <!-- Start Date Filter -->
            <mat-form-field
                class="fuse-mat-dense"
                [subscriptSizing]="'dynamic'"
            >
                <mat-label>Date de début</mat-label>
                <input
                    matInput
                    [matDatepicker]="startDatePicker"
                    [formControl]="startDateFilterControl"
                />
                <mat-datepicker-toggle
                    matSuffix
                    [for]="startDatePicker"
                ></mat-datepicker-toggle>
                <mat-datepicker #startDatePicker></mat-datepicker>
            </mat-form-field>

            <!-- End Date Filter -->
            <mat-form-field
                class="fuse-mat-dense"
                [subscriptSizing]="'dynamic'"
            >
                <mat-label>Date de fin</mat-label>
                <input
                    matInput
                    [matDatepicker]="endDatePicker"
                    [formControl]="endDateFilterControl"
                />
                <mat-datepicker-toggle
                    matSuffix
                    [for]="endDatePicker"
                ></mat-datepicker-toggle>
                <mat-datepicker #endDatePicker></mat-datepicker>
            </mat-form-field>
        </div>
    </div>

    <!-- Main content -->
    <div
        class="flex justify-between bg-gray-200 p-10 sm:overflow-x-auto sm:overflow-y-auto dark:bg-transparent"
    >
        <div
            class="max-w-8xl mx-auto flex w-full flex-auto flex-col rounded-lg sm:overflow-x-auto sm:overflow-y-auto"
        >
            <mtx-grid
                [data]="transfers()"
                [columns]="columns()"
                [loading]="isLoading()"
                [columnResizable]="false"
                [rowStriped]="false"
                [showToolbar]="true"
                [pageOnFront]="false"
                [length]="totalElements()"
                [pageSizeOptions]="pageSizeOptions()"
                [pageIndex]="pageRequest().page"
                [pageSize]="pageRequest().size"
                [toolbarTemplate]="toolbarTpl"
                [columnMenuButtonText]="'Colonnes'"
                [columnMenuButtonType]="'stroked'"
                [columnMenuButtonColor]="'primary'"
                [noResultText]="'Aucun virement trouvé.'"
                (page)="onPageEvent($event)"
                (sortChange)="onSortChange($event)"
            >
                <ng-template #toolbarTpl>
                    <div class="flex w-full items-center gap-2">
                        <mat-form-field
                            class="fuse-mat-dense hidden w-full bg-white md:block"
                            [subscriptSizing]="'dynamic'"
                        >
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:magnifying-glass'"
                            />
                            <input
                                matInput
                                class="truncate"
                                title="rechercher"
                                [formControl]="searchInputControl"
                                [autocomplete]="'off'"
                                [placeholder]="'Rechercher...'"
                            />
                        </mat-form-field>
                    </div>
                </ng-template>
            </mtx-grid>
        </div>
    </div>
</div>
